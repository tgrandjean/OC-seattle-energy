%----------------------------------------------------------------------------------------
%	ARTICLE CONTENTS
%----------------------------------------------------------------------------------------

\section{Introduction}

L'objectif de ce travail est de produire un modèle statistique permettant de prévoir
les consommations des bâtiments ainsi que les rejets de gaz à effet de serre (GHG).


%------------------------------------------------

\section{Données disponibles}

\subsection{généralités}

Les données sont disponibles gratuitement sur le site de la ville de seattle et
également sur la plateforme "Kaggle".

Le jeu de données contient deux fichiers :
\begin{itemize}
  \item{2015-building-energy-benchmarking.csv}
  \item{2016-building-energy-benchmarking.csv}
\end{itemize}

Les deux jeux de données contiennent essentiellement les mêmes variables mais
certaines (Par exemple : la localisation) sont encodées différemment.

\subsection{Notes}

Les seules différences notables entre les deux jeux de données sont:
\begin{itemize}
  \item{Le jeu de 2016 contient 36 observations de plus que celui de 2015.}
  \item{Les données de 2016 n'ont pas la variable "OtherFuelUse"}
  \item{Les données de 2015 contiennent une variable "Location" contenant les
       informations suivantes}
  \begin{itemize}
    \item{City}
    \item{State}
    \item{ZipCode}
    \item{Address}
    \item{Latitude et longitude}
  \end{itemize}
  \item{Les colonnes suivantes ont été renommées}
  \begin{itemize}
    \item{Comment : comments}
    \item{GHGEmissions(MetricTonsCO2e) : TotalGHGEmissions}
    \item{GHGEmissionsIntensity(kgCO2e/ft2) : GHGEmissionsIntensity}
  \end{itemize}
\end{itemize}

%------------------------------------------------

\section{Analyse exploratoire des données}

\subsection{Travail préliminaire sur les données}

Les deux jeux de données sont uniformisés au niveau des variables
(la colonne "Location" du jeu de données de 2015 est transformée en colonnes
"Address", "ZipCode", "Latitude", "Longitude", ...) puis aggrégés pour former
un jeu unique contenant 47 variables et 6716 observations.

On a donc les variables suivantes :
  voir table \ref{tab:table-variables}

\begin{table}[H]
  \caption{liste des variables}
  \label{tab:table-variables}
\input{./includes/variables.tex}
\end{table}

\paragraph{Suppression des observations dont la consommation est nulle} On supprime toutes les lignes pour lesquelles la consommation du bâtiment est $\le$ 0. Cela concerne 103 lignes sur 6716 soit 1,53 \% des données.


\subsection{Analyse des variables}

\subsubsection{Analyses univariées}

\paragraph{Usage des surfaces} On peut regarder la répartission des différents
usages de surfaces.
\begin{figure}[H]
  \includegraphics[width=\linewidth]{univar_primary_property_type.png}
  \caption{Principaux usages des bâtiments}
  \label{}
\end{figure}

\paragraph{Surface totale des bâtiments} On regarde la distribution des valeurs
de GFA (gross floor area.)
\begin{figure}[H]
  \includegraphics[width=\linewidth]{univar_property_gfa_total.png}
  \caption{Principaux usages des bâtiments}
  \label{}
\end{figure}



\subsubsection{Analyses bivariées}

On cherche quelles sont les variables corrélées avec la consommation d'énergie
du bâtiment.

\paragraph{Lien entre la surface du bâtiment et la consommation}

\begin{figure}[H]
  \includegraphics[width=\linewidth]{bivar_gfa_energy.png}
  \caption{Régression linéaire entre la surface du bâtiment (TotalGFA) et la
  consommation}
  \label{}
\end{figure}

\begin{figure}[H]
  \includegraphics[width=\linewidth]{bivar_gfa_energy_log.png}
  \caption{Régression linéaire entre la surface du bâtiment (TotalGFA) et la
  consommation avec passage en log}
  \label{}
\end{figure}

On observe une corrélation entre les variables.

\input{./includes/OLS_res.tex}

\paragraph{Lien entre le type d'utilisation et la consommation}
On peut regarder si le type d'utilisation des surfaces impact la consommation du bâtiment.
\begin{figure*}
  \includegraphics[width=\linewidth]{ANOVA_1.png}
  \caption{}
  \label{}
\end{figure*}
\begin{figure*}
  \includegraphics[width=\linewidth]{TukeyHSD_1.png}
  \caption{}
  \label{}
\end{figure*}




\subsubsection{Feature engineering}

Les données sont ré-encodées différemment pour servir d'entrée au modèle



%------------------------------------------------

\section{Modèle}


\subsection{Données d'entrée (input)}

On utilise les données préalablement ré-encodées comme entrée du modèle.
On a donc 65 variables d'entrée pour le modèle (64 usages type des surfaces ainsi
que la surface totale.).

\subsection{Données de sortie (output)}

Dans un premier temps, on se focalise uniquement sur la consommation énergétique
des bâtiments et non sur la production de GHG.

\subsection{Sélection du modèle}

Pour sélectionner un modèle, on entraîne successivement les modèles de
régression suivant:
\begin{itemize}
  \item LinearRegression (Régression linéaire simple)
  \item Régression linéaire avec régularisation.
  \begin{itemize}
    \item Ridge \cite{Marquardt1975}
    \item Lasso \cite{tibshirani96regression}
    \item ElasticNet
  \end{itemize}
  \item Régression non linéaire.
  \begin{itemize}
    \item Support Vector Machine (support vector regression SVR)
    \item Stochastic gradient descent (SGDRegressor)
    \item Nearest neighbors (KNeighborsRegressor)
    \item Arbres de décision (DecisionTreeRegressor)
  \end{itemize}
  \item Méthode d'ensemble
  \begin{itemize}
    \item RandomForestRegressor
    \item GradientBoostingRegressor
  \end{itemize}
  \item Réseau de neurones artificiels: Multilayer perceptron (MLPRegressor)
\end{itemize}

On peut alors comparer les résultats obtenus sur ces modèles.
\begin{table}[H]
  \input{./includes/scores_1.tex}
  \caption{Scores obtenus avec paramètres par défaut}
  \label{}
\end{table}

Hormis la régression linéaire simple, l'ensemble des modèles utilisés comportent
des hyperparamètres à optimiser.
Pour une comparaison des modèles en bon et dû forme, il est possible d'optimiser
les hyperparamètres de manière récursive et de comparer les modèles optimisés.
\footnote{Certain modèle demande un temps calcul non négligeable et prennent donc
du temps à entrainer, à ce stade, les modèles sont donc grossièrement optimisés
pour comparaison.}

\begin{figure}[H]
  \includegraphics[width=\linewidth]{models_scores.png}
  \caption{scores obtenus pour les modèles de régression}
  \label{}
\end{figure}
\subsection{Algorithme sélectionné}

\subsection{Entrainement du modèle}


%------------------------------------------------

\section{Résultats}


%------------------------------------------------

\section{Conclusion}


%------------------------------------------------
